<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>BPC â€” Top-Down Mars Ä°niÅŸi (Procedural)</title>
<style>
  :root{
    --descent: 6.5s;   /* iniÅŸ sÃ¼resi */
    --shake: .7s;      /* sarsÄ±ntÄ± sÃ¼resi */
    --dust:  1.1s;     /* toz halkasÄ± sÃ¼resi */
  }
  html,body{margin:0;height:100%;background:#000;color:#fff;font-family:system-ui;overflow:hidden}

  /* Arka plan (canvas) + vignette */
  #bg{position:fixed; inset:0; display:block}
  .vignette::after{content:"";position:fixed;inset:0;pointer-events:none;
    background:radial-gradient(120% 80% at 50% 35%, rgba(0,0,0,0), rgba(0,0,0,.25))}

  /* UI */
  .safe{position:fixed; left:12px; top:12px; z-index:20; display:flex; gap:10px; align-items:center}
  .brand{font-weight:800; text-shadow:0 1px 2px rgba(0,0,0,.55)}
  .btn{margin-left:8px; padding:.5rem .9rem; border-radius:999px;
       border:1px solid rgba(255,255,255,.22); background:rgba(0,0,0,.45); color:#fff}
  .hint{position:fixed; left:50%; bottom:12px; transform:translateX(-50%);
        background:rgba(0,0,0,.45); padding:6px 12px; border-radius:10px; z-index:20}

  /* GEMÄ° â€” ortada kocaman baÅŸlar, kÃ¼Ã§Ã¼lerek zemine iner */
  .lander{
    position:fixed; left:50%; top:50%; transform:translate(-50%,-50%);
    width:min(60vmin,520px); aspect-ratio:1/1; z-index:10; will-change:transform,filter,opacity;
    animation: descend var(--descent) cubic-bezier(.2,.85,.15,1) forwards,
               idle 3s ease-in-out var(--descent) infinite alternate;
  }
  .ship{
    width:100%; height:100%; object-fit:contain; display:block;
    mix-blend-mode:screen; filter:brightness(1.22) contrast(1.06) drop-shadow(0 10px 18px rgba(0,0,0,.5));
  }
  .glow{
    position:absolute; left:50%; top:66%; transform:translate(-50%,-50%);
    width:150%; height:150%; border-radius:50%; pointer-events:none;
    background:radial-gradient(45% 45% at 50% 50%, rgba(90,190,255,.6), rgba(30,140,255,.22) 55%, rgba(30,140,255,0) 72%);
    filter:blur(14px); opacity:0; mix-blend-mode:screen; animation: glow var(--descent) ease-out forwards;
  }

  /* Zemin efektleri */
  .shadow{position:fixed; left:50%; top:76%; transform:translate(-50%,-50%);
          width:42vmin; height:42vmin; z-index:7; opacity:0;
          background:radial-gradient(circle, rgba(0,0,0,.5), rgba(0,0,0,0) 70%);
          filter:blur(10px); animation: shIn var(--descent) ease-out forwards;}
  .ring{position:fixed; left:50%; top:76%; transform:translate(-50%,-50%);
        width:2vmin; height:2vmin; border-radius:50%; z-index:8; opacity:0;
        box-shadow:0 0 0 0 rgba(210,140,90,0)}
  .field{position:fixed; inset:0; pointer-events:none; z-index:9}
  .dot{position:absolute; width:.9vmin; height:.9vmin; border-radius:50%;
       background:rgba(210,140,90,.95); filter:blur(.35px); opacity:0}

  /* SarsÄ±ntÄ± */
  .shake{animation:shake var(--shake) ease-in-out both}

  /* Animasyonlar */
  @keyframes descend{
    from{ transform:translate(-50%,-50%) translateY(-6vh) scale(1.9) }
    70% { transform:translate(-50%,-50%) translateY(14vh)  scale(1.05) }
    to  { transform:translate(-50%,-50%) translateY(24vh)  scale(.85)  }
  }
  @keyframes idle{ from{ transform:translate(-50%,-50%) translateY(24vh) scale(.845) } to{ transform:translate(-50%,-50%) translateY(25.2vh) scale(.855) } }
  @keyframes glow{ 0%{opacity:0} 60%{opacity:.85} 100%{opacity:0} }
  @keyframes shIn{ 0%{opacity:0; transform:translate(-50%,-50%) scale(.3)} 100%{opacity:.85; transform:translate(-50%,-50%) scale(1)} }
  @keyframes ringFx{
    0%  {opacity:0; box-shadow:0 0 0 0 rgba(210,140,90,0)}
    12% {opacity:.35}
    100%{opacity:0; box-shadow:0 0 40vmin 12vmin rgba(210,140,90,.26)}
  }
  @keyframes shake{20%{transform:translate(2px,-2px)}40%{transform:translate(-3px,2px)}60%{transform:translate(3px,1px)}80%{transform:translate(-2px,-1px)}}
</style>
</head>
<body>
<canvas id="bg"></canvas>
<div class="vignette"></div>

<div class="safe">
  <div class="brand">ðŸ¦š BPC â€” Top-Down Mars Ä°niÅŸi</div>
  <button class="btn" id="replay">Tekrar Oynat</button>
</div>
<div class="hint">ðŸ‘† Dokun: tekrar oynat</div>

<div class="shadow"></div>
<div class="ring" id="ring"></div>
<div class="field" id="field"></div>

<div class="lander" id="lander">
  <img class="ship" src="Drone.png" alt="">
  <div class="glow"></div>
</div>

<script>
/* ===== Top-Down Mars zeminini CANVAS ile Ã¼ret ===== */
const cvs = document.getElementById('bg');
const ctx = cvs.getContext('2d', { alpha:false });
let W=0,H=0, stones=[];

function R(a,b){ return a + Math.random()*(b-a) }

function resize(){
  W = cvs.width = innerWidth;
  H = cvs.height = innerHeight;

  // dÃ¼zensiz kaya formlarÄ± (5â€“10 kÃ¶ÅŸe, pÃ¼rÃ¼zlÃ¼)
  stones = [];
  for(let i=0;i<360;i++){
    stones.push({
      x: Math.random()*W,
      y: Math.random()*H,
      r: 0.9 + Math.random()*2.6,
      rot: Math.random()*Math.PI*2,
      verts: 5 + Math.floor(Math.random()*6),
      rough: 0.65 + Math.random()*0.55
    });
  }
  draw(0);
}
addEventListener('resize', resize, {passive:true}); resize();

/* zemin + taÅŸlar */
function draw(t){
  // temel zemin (koyu â†’ aÃ§Ä±k kÄ±zÄ±l)
  const g = ctx.createLinearGradient(0,0,0,H);
  g.addColorStop(0,'#6f3624');
  g.addColorStop(1,'#8b472c');
  ctx.fillStyle=g; ctx.fillRect(0,0,W,H);

  // yÃ¼zey doku lekeleri
  for(let i=0;i<120;i++){
    const x=Math.random()*W, y=Math.random()*H, r=30+Math.random()*110;
    const d=ctx.createRadialGradient(x,y,0,x,y,r);
    d.addColorStop(0,`rgba(90,45,28,${0.05+Math.random()*0.07})`);
    d.addColorStop(1,'rgba(0,0,0,0)');
    ctx.fillStyle=d; ctx.beginPath(); ctx.arc(x,y,r,0,2*Math.PI); ctx.fill();
  }

  // dÃ¼zensiz taÅŸlar (siyahÄ±msÄ± gÃ¶lge + highlight)
  for(const s of stones){
    const sc = 1 + t*2.0;           // iniÅŸe yaklaÅŸtÄ±kÃ§a bÃ¼yÃ¼
    const Rr = s.r * sc;

    ctx.save();
    ctx.translate(s.x, s.y);
    ctx.rotate(s.rot);

    // gÃ¶lge
    ctx.shadowColor = 'rgba(0,0,0,0.35)';
    ctx.shadowBlur  = 6;
    ctx.shadowOffsetX = 1.5;
    ctx.shadowOffsetY = 1.6;

    // pÃ¼rÃ¼zlÃ¼ Ã§okgen
    ctx.beginPath();
    for(let i=0;i<s.verts;i++){
      const ang = (i/s.verts)*Math.PI*2;
      const rr  = Rr * (0.8 + Math.random()*0.4) * s.rough;
      const px  = Math.cos(ang)*rr;
      const py  = Math.sin(ang)*rr*0.9;
      (i===0) ? ctx.moveTo(px,py) : ctx.lineTo(px,py);
    }
    ctx.closePath();
    ctx.fillStyle = 'rgba(55,32,25,0.95)'; // koyu kahve-siyahÄ±msÄ±
    ctx.fill();

    // Ã¼st-sol highlight
    ctx.shadowColor = 'transparent';
    ctx.fillStyle = 'rgba(210,150,100,0.25)';
    ctx.beginPath();
    ctx.ellipse(-Rr*0.25, -Rr*0.25, Rr*0.45, Rr*0.28, -0.3, 0, Math.PI*2);
    ctx.fill();

    ctx.restore();
  }

  // kenarlara vignette
  const vg = ctx.createRadialGradient(W/2,H/2, Math.min(W,H)*.35, W/2,H/2, Math.max(W,H)*.95);
  vg.addColorStop(0,'rgba(0,0,0,0)');
  vg.addColorStop(1,'rgba(0,0,0,.22)');
  ctx.fillStyle = vg; ctx.fillRect(0,0,W,H);
}

/* ===== ZAMANLAMA / EFEKTLER ===== */
const lander = document.getElementById('lander');
const ring   = document.getElementById('ring');
const field  = document.getElementById('field');

let t=0, playing=true;
function loop(){
  if(playing){ t += 1/60 / 6.5; if(t>1) t=1; }
  draw(t);
  requestAnimationFrame(loop);
}
loop();

/* Daha AZ toz parÃ§acÄ±ÄŸÄ± */
function particles(n=45){
  field.innerHTML='';
  const cx = innerWidth/2, cy = innerHeight*0.76;
  for(let i=0;i<n;i++){
    const d = document.createElement('div'); d.className='dot';
    d.style.left = (cx + (Math.random()*18-9))+'px';
    d.style.top  = (cy + (Math.random()*12-6))+'px';
    field.appendChild(d);

    const ang=Math.random()*Math.PI*2;
    const dist=6+Math.random()*14;  // daha kÄ±sa mesafe
    const up  =-1+Math.random()*2;
    const dur = 480+Math.random()*700; // daha kÄ±sa Ã¶mÃ¼r

    d.animate([
      {transform:'translate(0,0)',opacity:0},
      {transform:`translate(${Math.cos(ang)*dist}vmin, ${Math.sin(ang)*dist+up}vmin)`,opacity:.9,offset:.28},
      {opacity:0}
    ],{duration:dur,easing:'ease-out',fill:'forwards',delay:Math.random()*120});
  }
}

/* tetikleme zamanlarÄ± */
setTimeout(()=>{ ring.style.animation='ringFx var(--dust) ease-out 0s 1 forwards'; particles(); shake(); }, 6500 - 140);

/* sarsÄ±ntÄ± */
function shake(){ document.body.classList.add('shake'); setTimeout(()=>document.body.classList.remove('shake'),700); }

/* replay */
const replayBtn = document.getElementById('replay');
replayBtn.onclick = restart;
document.body.addEventListener('click', (e)=>{
  if(e.target===replayBtn || e.target.closest('.safe')) return;
  restart();
});
function restart(){
  lander.style.animation='none'; ring.style.animation='none';
  t=0; playing=true; field.innerHTML='';
  requestAnimationFrame(()=>{ lander.style.animation=''; });
  setTimeout(()=>{ ring.style.animation='ringFx var(--dust) ease-out 0s 1 forwards'; particles(); shake(); }, 6500 - 140);
}

/* gÃ¶rsel Ã¶n yÃ¼kleme */
(new Image()).src='Drone.png';
</script>
</body>
</html>
