<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Babypeacock â€” Mars Ãœstten Ä°niÅŸ</title>
<style>
  :root{
    --descent-time: 6s;          /* iniÅŸ sÃ¼resi */
    --shake-time: .8s;           /* sarsÄ±ntÄ± sÃ¼resi */
    --dust-time: 1.6s;           /* toz halkasÄ± sÃ¼resi */
    --idle-bob-time: 2.6s;       /* yerde hafif salÄ±nÄ±m */
  }
  html,body{height:100%;margin:0;background:#000;color:#fff;font-family:system-ui,Segoe UI,Roboto,Arial}
  /* Sahne: canvas Ã¼stÃ¼ne UI/ship bindiriliyor */
  .stage{ position:fixed; inset:0; overflow:hidden; touch-action:manipulation; }
  #marsCanvas{ position:absolute; inset:0; width:100%; height:100%; display:block; background:#120b08; }

  /* UI */
  .safe{ position:fixed; top:env(safe-area-inset-top,0); left:env(safe-area-inset-left,0); right:env(safe-area-inset-right,0);
         padding:clamp(8px,2vmin,16px); display:flex; gap:10px; align-items:center; z-index:5;}
  .brand{ font-weight:800; letter-spacing:.2px; text-shadow:0 1px 2px rgba(0,0,0,.45); }
  .btn{ margin-left:auto; font-size:14px; padding:.5rem .8rem; border-radius:999px; background:rgba(0,0,0,.45);
        border:1px solid rgba(255,255,255,.15); color:#fff; cursor:pointer; }
  .btn:active{ transform:scale(.98) }
  .hint{ position:fixed; right:12px; bottom:10px; font-size:12px; opacity:.75; user-select:none; background:rgba(0,0,0,.35);
         padding:6px 10px; border-radius:10px; backdrop-filter:blur(4px); z-index:5;}

  /* Gemi grubu */
  .lander{ position:absolute; left:50%; top:15vh; width:min(22vmin,220px); aspect-ratio:1/1; transform:translate(-50%,-50%);
           animation: descend var(--descent-time) cubic-bezier(.1,.8,.2,1) forwards,
                      bob var(--idle-bob-time) ease-in-out var(--descent-time) infinite alternate; z-index:4; }
  .ship{ width:100%; height:100%; background:url("./Assets.png") center/contain no-repeat;
         /* Siyah fonu yok et */
         mix-blend-mode:screen; filter:drop-shadow(0 10px 18px rgba(0,0,0,.45)); position:relative; }

  /* Ãœstten gÃ¶rÃ¼nÃ¼mde motor etkisi: merkezden dÄ±ÅŸa sÄ±cak parÄ±ltÄ± */
  .engine-glow{ position:absolute; left:50%; top:60%; transform:translate(-50%,-50%); width:85%; height:85%;
                background:radial-gradient(55% 55% at 50% 50%, rgba(255,210,130,.65), rgba(255,145,60,.35) 50%, rgba(255,145,60,0) 70%);
                filter:blur(8px); opacity:.0; pointer-events:none;
                animation: glow var(--descent-time) ease-out forwards; mix-blend-mode:screen; }

  /* GÃ¶lge (Ã¼stten gÃ¶rÃ¼nÃ¼m iÃ§in dairesel) */
  .shadow{ position:absolute; left:50%; top:calc(50% + 18vmin); transform:translate(-50%,-50%); width:30vmin; height:30vmin;
           background:radial-gradient(50% 50% at 50% 50%, rgba(0,0,0,.45), rgba(0,0,0,0) 70%);
           filter:blur(6px); opacity:0; z-index:1;
           animation: shadow-in var(--descent-time) ease-out forwards; }

  /* Toz halkasÄ± ve parÃ§acÄ±klar (Ã¼stten dairesel yayÄ±lÄ±m) */
  .dust-ring{ position:absolute; left:50%; top:calc(50% + 18vmin); transform:translate(-50%,-50%); width:4vmin; height:4vmin;
              border-radius:50%; box-shadow:0 0 0 0 rgba(167,104,61,0); opacity:0; z-index:2;
              animation: dust var(--dust-time) ease-out calc(var(--descent-time) - .15s) forwards; }
  .dustfield{ position:absolute; left:0; top:0; right:0; bottom:0; z-index:3; pointer-events:none; }
  .particle{ position:absolute; width:.9vmin; height:.9vmin; border-radius:50%; background:rgba(167,104,61,.92); filter:blur(.3px); opacity:0; }

  /* Ekran sarsÄ±ntÄ±sÄ± */
  .shake{ animation: screen-shake var(--shake-time) ease-in-out both; }

  /* Animasyonlar */
  @keyframes descend{
    from{ transform:translate(-50%,-75vh) scale(1.05) rotate(-2deg); }
    72% { transform:translate(-50%, calc(50% - 2vmin)) scale(1.0) rotate(0deg); }
    to  { transform:translate(-50%, 50%) scale(1.0) rotate(0deg); }
  }
  @keyframes bob{ from{ transform: translate(-50%, calc(50% - .8vmin)) } to{ transform: translate(-50%, calc(50% + .8vmin)) } }
  @keyframes shadow-in{
    from{ opacity:0; transform:translate(-50%,50%) scale(.25) }
    60% { opacity:.65; transform:translate(-50%,50%) scale(.95) }
    to  { opacity:.85; transform:translate(-50%,50%) scale(1) }
  }
  @keyframes dust{
    0%{   opacity:0; box-shadow:0 0 0 0 rgba(167,104,61,0) }
    1%{   opacity:.22 }
    100%{ opacity:0; box-shadow:0 0 48vmin 14vmin rgba(167,104,61,.34) }
  }
  @keyframes glow{
    0%{ opacity:.0; transform:translate(-50%,-50%) scale(.8) }
    60%{ opacity:.9; }
    100%{ opacity:.0; transform:translate(-50%,-50%) scale(1.1) }
  }
  @keyframes screen-shake{
    0%{ transform: translate(0,0) }
    20%{ transform: translate(2px,-2px) }
    40%{ transform: translate(-3px,2px) }
    60%{ transform: translate(3px,1px) }
    80%{ transform: translate(-2px,-1px) }
    100%{ transform: translate(0,0) }
  }
</style>
</head>
<body>
  <div class="stage" id="stage">
    <canvas id="marsCanvas"></canvas>

    <div class="safe">
      <div class="brand">ðŸ¦š Babypeacock â€” Ãœstten Mars Ä°niÅŸi</div>
      <button class="btn" id="replay">Tekrar Oynat</button>
    </div>

    <!-- Gemi & efektleri -->
    <div class="lander" id="lander">
      <div class="ship" aria-label="BabyPeacock Lander">
        <div class="engine-glow"></div>
      </div>
    </div>
    <div class="shadow" id="shadow"></div>
    <div class="dust-ring" id="ring"></div>
    <div class="dustfield" id="dustfield"></div>

    <div class="hint">ðŸ‘† Ekrana dokun: tekrar oynat</div>
  </div>

<script>
/* ---------- Mars yÃ¼zeyini kuÅŸbakÄ±ÅŸÄ± Ã§izen basit painter ---------- */
const cvs = document.getElementById('marsCanvas');
const ctx = cvs.getContext('2d', { alpha:false });

function resizeCanvas(){
  const dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
  cvs.width = Math.floor(innerWidth * dpr);
  cvs.height = Math.floor(innerHeight * dpr);
  cvs.style.width = '100%';
  cvs.style.height = '100%';
  ctx.setTransform(dpr,0,0,dpr,0,0);
  paintMars();
}
window.addEventListener('resize', resizeCanvas, { passive:true });

function rand(a,b){ return a + Math.random()*(b-a); }

function paintMars(){
  const w = innerWidth, h = innerHeight;
  // taban renk
  const base = ctx.createLinearGradient(0,0,0,h);
  base.addColorStop(0,'#a65633');  // daha aÃ§Ä±k
  base.addColorStop(1,'#8a4a2e');  // daha koyu
  ctx.fillStyle = base;
  ctx.fillRect(0,0,w,h);

  // doku: yumuÅŸak lekeler
  for(let i=0;i<180;i++){
    const x = Math.random()*w, y = Math.random()*h;
    const r = rand(20,120);
    const g = ctx.createRadialGradient(x,y,0,x,y,r);
    g.addColorStop(0, `rgba(130,70,40,${rand(.08,.16)})`);
    g.addColorStop(1, 'rgba(0,0,0,0)');
    ctx.fillStyle = g; ctx.beginPath(); ctx.arc(x,y,r,0,Math.PI*2); ctx.fill();
  }

  // kraterler
  for(let i=0;i<8;i++){
    const x = rand(40,w-40), y = rand(40,h-40), r = rand(24,60);
    // dÄ±ÅŸ gÃ¶lge
    const k = ctx.createRadialGradient(x,y,r*1.1,x,y,r*.2);
    k.addColorStop(0,'rgba(0,0,0,.28)');
    k.addColorStop(1,'rgba(0,0,0,0)');
    ctx.fillStyle = k; ctx.beginPath(); ctx.arc(x,y,r*1.1,0,2*Math.PI); ctx.fill();
    // iÃ§ kenar parlak
    const iG = ctx.createRadialGradient(x,y,r*.65,x,y,0);
    iG.addColorStop(0,'rgba(255,230,190,.35)');
    iG.addColorStop(1,'rgba(255,230,190,0)');
    ctx.fillStyle = iG; ctx.beginPath(); ctx.arc(x,y,r*.8,0,2*Math.PI); ctx.fill();
  }

  // kayalar
  for(let i=0;i<160;i++){
    const x = Math.random()*w, y = Math.random()*h;
    const r = rand(2,6);
    ctx.fillStyle = 'rgba(60,35,25,.65)';
    ctx.beginPath(); ctx.ellipse(x,y,r*1.2,r,.2,0,2*Math.PI); ctx.fill();
    ctx.fillStyle = 'rgba(190,120,80,.9)';
    ctx.beginPath(); ctx.arc(x-0.6,y-0.6,r,0,2*Math.PI); ctx.fill();
  }

  // yumuÅŸak vignette
  const vg = ctx.createRadialGradient(w/2,h/2, Math.min(w,h)*.3, w/2,h/2, Math.max(w,h)*.8);
  vg.addColorStop(0,'rgba(0,0,0,0)');
  vg.addColorStop(1,'rgba(0,0,0,.25)');
  ctx.fillStyle = vg; ctx.fillRect(0,0,w,h);
}
resizeCanvas();

/* ---------- Animasyon kontrol ---------- */
const stage  = document.getElementById('stage');
const lander = document.getElementById('lander');
const replay = document.getElementById('replay');
const dustfield = document.getElementById('dustfield');

function burstParticles(count=110){
  dustfield.innerHTML = '';
  const rect = lander.getBoundingClientRect();
  const cx = rect.left + rect.width/2;
  const cy = rect.top  + rect.height/2 + (window.innerHeight*0.18); // gÃ¶lge / ring hizasÄ±
  for(let i=0;i<count;i++){
    const p = document.createElement('div');
    p.className = 'particle';
    const angle = Math.random()*Math.PI*2;
    const dist = 10 + Math.random()*26;       // vmin
    const up   = -2 + Math.random()*4;        // hafif dikey varyasyon
    const dur  = 600 + Math.random()*900;     // ms
    p.style.left = (cx + (Math.random()*20-10)) + 'px';
    p.style.top  = (cy + (Math.random()*16-8)) + 'px';
    dustfield.appendChild(p);
    requestAnimationFrame(()=>{
      p.animate([
        { transform:'translate(0,0)', opacity:.0 },
        { transform:`translate(${Math.cos(angle)*dist}vmin, ${Math.sin(angle)*dist + up}vmin)`, opacity:.95, offset:.25 },
        { transform:`translate(${Math.cos(angle)*dist*1.2}vmin, ${Math.sin(angle)*dist*1.2 + up}vmin)`, opacity:0 }
      ], { duration: dur, easing:'ease-out', fill:'forwards', delay: Math.random()*120 });
    });
  }
}

function restart(){
  // animasyon sÄ±nÄ±flarÄ±nÄ± baÅŸa al
  lander.style.animation = 'none';
  const l = lander.cloneNode(true);
  lander.replaceWith(l);
  // ring/shadow alanlarÄ± zaten ayrÄ±
  const descentMs = 6000;
  setTimeout(()=>{ stage.classList.add('shake'); burstParticles(120); }, descentMs - 170);
  setTimeout(()=> stage.classList.remove('shake'), descentMs - 170 + 800);
  requestAnimationFrame(()=>{ l.style.animation = ''; });
  // gÃ¶rsel Ã¶n yÃ¼kleme
  const i = new Image(); i.src = './Assets.png';
}
replay.addEventListener('click', restart);
stage.addEventListener('click', (e)=>{
  if(e.target.closest('.safe') || e.target.id === 'replay') return;
  restart();
});

// Ä°lk iniÅŸte de efektleri tetikle
setTimeout(()=>{ stage.classList.add('shake'); burstParticles(120); }, 6000 - 170);
setTimeout(()=> stage.classList.remove('shake'), 6000 - 170 + 800);
</script>
</body>
</html>
